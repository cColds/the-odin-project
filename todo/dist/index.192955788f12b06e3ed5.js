"use strict";(self.webpackChunktodo=self.webpackChunktodo||[]).push([[826],{543:()=>{class e{constructor(){this.events={}}subscribe(e,t){const n=this;return n.events[e]||(n.events[e]=[]),n.events[e].push(t),n}publish(e,t){return!!this.events[e]&&(this.events[e].forEach((e=>e(t))),!0)}}const t=class{constructor({id:e=crypto.randomUUID(),title:t,iconType:n="list_alt",filter:o=(({projectId:e})=>e===this.id),type:s="user",options:{deleted:a=!0,edited:r=!0,added:d=!0,parent:i=!1}={}}){const l=this;l.id=e,l.title=t,l.iconType=n,l.filter=o,l.type=s,l.options={deleted:a,edited:r,added:d,parent:i}}setData({id:e=this.id,title:t=this.title,iconType:n=this.iconType,filter:o=this.filter,type:s=this.type,options:{deleted:a=this.deleted,edited:r=this.edited,added:d=this.added,parent:i=this.parent}=this.options}){const l=this;l.id=e,l.title=t,l.iconType=n,l.filter=o,l.type=s,l.options={deleted:a,edited:r,added:d,parent:i}}},n=["Su","Mo","Tu","We","Th","Fr","Sa"],o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s={get today(){return this.dropTime(new Date)},get tomorrow(){const{today:e}=this;return e.setDate(e.getDate()+1),this.dropTime(e)},get weekend(){const{today:e}=this;return 6===e.getDay||0===e.getDay?this.dropTime(e):this.getSunday()},isExpired(e){const t=this.dropTime(new Date).getTime();return this.dropTime(new Date(e.getTime())).getTime()<t},isToday(e){const t=this.dropTime(new Date),n=this.dropTime(new Date(e.getTime()));return t.getTime()===n.getTime()},isWeek(e){const t=this.getMonday(),n=this.getSunday();return n.setDate(n.getDate()+1),e.getTime()>=t.getTime()&&e.getTime()<n.getTime()},isMonth(e){const t=this.firstMonthDay(),n=this.lastMonthDay();return n.setDate(n.getDate()+1),e.getTime()>=t.getTime()&&e.getTime()<n.getTime()},dropTime(e){const t=new Date(e.getTime());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},getMonday(e=new Date){const t=new Date(e.getTime()),n=e.getDay(),o=e.getDate(),s=o-n+(o?1:-6);return this.dropTime(new Date(t.setDate(s)))},getSunday(e=new Date){const t=this.getMonday(e);return t.setDate(t.getDate()+6),this.dropTime(t)},getWeekShortName:(e=new Date)=>n[e.getDay()],getMonthShortName:(e=new Date)=>o[e.getMonth()],firstMonthDay(e=new Date){return this.dropTime(new Date(e.getFullYear(),e.getMonth(),1))},lastMonthDay(e=new Date){return this.dropTime(new Date(e.getFullYear(),e.getMonth()+1,0))},dateToText:(e=new Date)=>`${String(e.getDate()).padStart(2,"0")}.${String(e.getMonth()+1).padStart(2,"0")}.${e.getFullYear()}`,dateToShortText(e=new Date){const t=this.getWeekShortName(e),n=this.getMonthShortName(e);return`${t} ${e.getDate()} ${n}`},calendarDays(e=new Date){const t=1-((this.firstMonthDay(e).getDay()||7)-1),n=42- -t,o=[];for(let s=t;s<n;s+=1){const t=this.dropTime(new Date(e.getFullYear(),e.getMonth(),s));o.push(t)}return o}};class a{constructor({id:e=crypto.randomUUID(),title:t,description:n,dueDate:o=null,priority:s=0,projectId:a,isCompleted:r=!1}){const d=this;d.id=e,d.title=t,d.description=n,d.dueDate=o,d.priority=s,d.projectId=a,d.isCompleted=r}setData({title:e=this.title,description:t=this.description,dueDate:n=this.dueDate,priority:o=this.priority,projectId:s=this.projectId,isCompleted:a=this.isCompleted}){const r=this;r.title=e,r.description=t,r.dueDate=n,r.priority=o,r.projectId=s,r.isCompleted=a}get isExpired(){return this.dueDate&&s.isExpired(new Date(this.dueDate))}}const r=new function(){const e={},n={};let o=null,s=!0,r=null;return{set app(e){r||(r=e)},get app(){return r},set isSidebarShown(e){s=e},get isSidebarShown(){return s},set activeProjectId(t){if(!e[t])throw new Error("Incorrect project id");o=t},get activeProjectId(){return o},getProject:t=>e?.[t]||null,getProjects(){return Object.keys(e).map((e=>this.getProject(e)))},getProjectsByOptions({added:e=!1,edited:t=!1,deleted:n=!1}){return this.getProjects().filter((({options:o})=>o.added===e&&o.edited===t&&o.deleted===n))},getUserProjects(){return this.getProjects().filter((({type:e})=>"user"===e))},getTodo:e=>n?.[e]||null,getTodos(e){const t=Object.keys(n).map((e=>this.getTodo(e)));return e?t.filter((t=>e(t))):t},addProject(n){if(!(n instanceof t))throw new Error("Incorrect project object");const{id:o}=n;e[o]||(e[o]={}),e[o]=n},addTodo(e){if(!(e instanceof a))throw new Error("Incorrect todo object");const{id:t}=e;n[t]||(n[t]={}),n[t]=e},removeProject(t){if(!e[t])throw new Error("Incorrect project id");const n=this.getProject(t),o=this.getTodos(n.filter);Object.keys(o).forEach((e=>{const{id:t}=o[e];this.removeTodo(t)})),delete e[t]},removeTodo(e){if(!n[e])throw new Error("Incorrect todo id");delete n[e]}}},d={save(e,t){localStorage.setItem(`vyachnd-todo-${e}`,JSON.stringify(t))},async load(e){const t=localStorage.getItem(`vyachnd-todo-${e}`);return await JSON.parse(t)||[]}};class i{constructor(){this.events=new e,this.data=r}toggleSidebar(e){this.data.isSidebarShown=e,this.events.publish("toggleSidebar",e)}deleteTodo(e){this.data.removeTodo(e),this.events.publish("deleteTodo",e)}editTodo(e,t){const n=r.getTodo(e);n&&n.setData(t),this.events.publish("editTodo",n)}loadTodo(e){this.data.addTodo(e)}updateTabs(){this.events.publish("updateTabs")}changeTab(e){const t=this,n=t.data.activeProjectId;t.data.activeProjectId=e,t.events.publish("changeTab",{prevId:n,currentId:e})}createTab(e){this.data.addProject(e),this.events.publish("createTab",e)}removeProject(e){this.data.removeProject(e),this.events.publish("removeProject",e),d.save("projects",r.getUserProjects()),d.save("todos",r.getTodos())}}class l{constructor(t){this.events=new e,this.data=t}setData(e){this.data=e,this.events.publish("setData")}}class c{constructor(e){const t=this;t.module=e,t.elements={},t.module.events.subscribe("render",(({node:e,appendType:n})=>t.render({node:e,appendType:n}))).subscribe("setData",(()=>t.update())).subscribe("update",(()=>t.update()))}update(){const{headingIcon:e,headingTitle:t,headingAddBtn:n,headingEditBtn:o,headingRemoveBtn:s}=this.elements,{title:a,iconType:r,options:{added:d,edited:i,deleted:l}={}}=this.module.data;e.textContent=r,t.textContent=a,n.classList[d?"remove":"add"]("hidden"),o.classList[i?"remove":"add"]("hidden"),s.classList[l?"remove":"add"]("hidden")}render({node:e,appendType:t}){if(!(e instanceof HTMLElement))throw new Error("Can't rendering, bad node");const n=this,{heading:o}=n.elements,{iconType:s,title:a}=n.module.data;o&&o instanceof HTMLElement?n.elements.heading.innerHTML="":(n.elements.heading=document.createElement("header"),n.elements.heading.classList.add("heading"),e[t](n.elements.heading)),n.elements.heading.innerHTML=`\n      <span class="material-symbols-rounded heading__icon">${s}</span>\n      <h2 class="heading__title">${a}</h2>\n\n      <div class="heading__controls">\n        <button class="btn heading__add-todo-btn" type="button" aria-label="Add Todo">\n          <span class="material-symbols-rounded">add</span>\n        </button>\n\n        <button class="btn heading__edit-project-btn" type="button" aria-label="Edit Project">\n          <span class="material-symbols-rounded">edit</span>\n        </button>\n\n        <button class="btn btn_critical heading__remove-project-btn" type="button" aria-label="Remove Project">\n          <span class="material-symbols-rounded">delete</span>\n        </button>\n      </div>\n    `,n.elements.headingIcon=n.elements.heading.querySelector(".heading__icon"),n.elements.headingTitle=n.elements.heading.querySelector(".heading__title"),n.elements.headingAddBtn=n.elements.heading.querySelector(".heading__add-todo-btn"),n.elements.headingEditBtn=n.elements.heading.querySelector(".heading__edit-project-btn"),n.elements.headingRemoveBtn=n.elements.heading.querySelector(".heading__remove-project-btn")}}class m{constructor(e,t){this.module=e,this.view=t}get events(){return this.module.events}get data(){return this.module.data}setData(e){this.module.setData(e)}createTodo(){const e=this,{id:t,options:{added:n}}=e.data;n&&e.events.publish("createTodo",t)}editProject(){const e=this,{id:t,options:{edited:n}}=e.data;n&&e.events.publish("editProject",t)}removeProject(){const e=this,{id:t,options:{deleted:n}}=e.data;n&&e.events.publish("removeProject",t)}update(){this.events.publish("update")}render({node:e,appendType:t="append"}){const n=this;n.module.events.publish("render",{node:e,appendType:t});const{headingAddBtn:o,headingEditBtn:s,headingRemoveBtn:a}=n.view.elements;o.addEventListener("click",(()=>n.createTodo())),s.addEventListener("click",(()=>n.editProject())),a.addEventListener("click",(()=>n.removeProject()))}}class u{constructor(e={}){const t=new l(e),n=new c(t),o=new m(t,n);this.controller=o}}class p{constructor(t){const n=this;n.events=new e,n.data=t,n.isActive=t.isActive}setActive(e){this.isActive=e,this.events.publish("setActive",e)}}class b{constructor(e){const t=this;t.module=e,t.elements={},t.module.events.subscribe("render",(({node:e,appendType:n})=>t.render({node:e,appendType:n}))).subscribe("setActive",(e=>t.setActive(e))).subscribe("update",(()=>t.update()))}setActive(e){const{tab:t}=this.elements;t.classList[e?"add":"remove"]("tab_active")}update(){const e=this,{tabIcon:t,tabTitle:n,tabTodoCount:o}=e.elements,{data:{title:s,iconType:a,filter:d},isActive:i}=e.module,l=r.getTodos(d).length;t.textContent=a,n.textContent=s,o.textContent=l>99?"99+":l,e.setActive(i)}render({node:e,appendType:t}){if(!(e instanceof HTMLElement))throw new Error("Can't rendering, bad node");const n=this,{tab:o}=n.elements;o&&o instanceof HTMLElement?n.elements.tab.innerHTML="":(n.elements.tab=document.createElement("div"),n.elements.tab.classList.add("tab"),e[t](n.elements.tab)),n.elements.tab.innerHTML='\n      <span class="material-symbols-rounded tab__icon"></span>\n      <span class="tab__name"></span>\n      <span class="tab__todo-count"></span>\n    ',n.elements.tabIcon=n.elements.tab.querySelector(".tab__icon"),n.elements.tabTitle=n.elements.tab.querySelector(".tab__name"),n.elements.tabTodoCount=n.elements.tab.querySelector(".tab__todo-count")}}class h{constructor(e,t){this.module=e,this.view=t}get events(){return this.module.events}setActive(e){this.module.setActive(e)}tabClick(){const e=this,{isActive:t}=e.module;t||(e.setActive(!0),e.events.publish("tabClick"))}update(){this.events.publish("update")}render({node:e,appendType:t="append"}){const n=this;n.module.events.publish("render",{node:e,appendType:t});const{tab:o}=n.view.elements;n.update(),o.addEventListener("click",(()=>n.tabClick()))}}class v{constructor(e){const t=new p(e),n=new b(t),o=new h(t,n);this.controller=o}}class y{constructor(t){this.events=new e,this.data=t}}class T{constructor(e){const t=this;t.module=e,t.elements={},t.module.events.subscribe("render",(({node:e,appendType:n})=>t.render({node:e,appendType:n}))).subscribe("update",(()=>t.update()))}get priorityClass(){const{priority:e}=this.module.data;switch(e){case 1:return"btn btn_remember";case 2:return"btn btn_important";case 3:return"btn btn_critical";default:return"btn"}}update(){const e=this,{todo:t,todoCheckboxBtn:n,todoTitle:o,todoDate:a,todoDescription:d,todoParentBtn:i,todoParentBtnIcon:l,todoParentBtnLabel:c}=e.elements,{title:m,dueDate:u,description:p,projectId:b,isCompleted:h,isExpired:v}=e.module.data,{activeProjectId:y}=r,{options:{parent:T}}=r.getProject(y),g=r.getProject(b);t.classList[h?"add":"remove"]("todo_active"),t.classList[v?"add":"remove"]("todo_expired"),n.className=`${e.priorityClass} todo__checkbox`,n.classList[h?"add":"remove"]("btn_active"),o.textContent=m,a.textContent=`${v?"Expired: ":""}${u?s.dateToText(new Date(u)):"No Date"}`,d.textContent=p,i.ariaLabel=g.title,i.classList[T?"remove":"add"]("hidden"),c.ariaLabel=g.title,l.textContent=g.iconType}render({node:e,appendType:t}){const n=this,{todo:o}=n.elements,{title:a,description:d,dueDate:i,projectId:l}=n.module.data,c=r.getProject(l);if(!(e instanceof HTMLElement))throw new Error("Can't rendering, bad node");o&&o instanceof HTMLElement?n.elements.todo.innerHTML="":(n.elements.todo=document.createElement("div"),n.elements.todo.classList.add("todo"),e[t](n.elements.todo)),n.elements.todo.innerHTML=`\n      <button class="${n.priorityClass} todo__checkbox" type="button" aria-label="Complete Todo">\n        <span class="material-symbols-rounded">done</span>\n      </button>\n\n      <div class="todo-body">\n        <div class="todo__header">\n          <h3 class="todo__title">${a}</h3>\n          <span class="todo__due-date">\n            ${i?s.dateToText(new Date(i)):"No Date"}\n            <span class="material-symbols-rounded">schedule</span>\n          </span>\n\n          <div class="todo-controls">\n            <button class="btn todo-edit-btn" type="button" aria-label="Edit Todo">\n              <span class="material-symbols-rounded">edit</span>\n            </button>\n\n            <button class="btn btn_critical todo-delete-btn" type="button" aria-label="Delete Todo">\n              <span class="material-symbols-rounded">close</span>\n            </button>\n          </div>\n        </div>\n\n        <p class="todo__description">${d}</p>\n\n        <button class="btn btn_primary todo__parent" type="button" aria-label="${c.title} Project">\n          <span class="material-symbols-rounded parent__icon">${c.iconType}</span>\n          <span class="parent__label">${c.title}</span>\n        </button>\n      </div>\n    `,n.elements.todoCheckboxBtn=n.elements.todo.querySelector(".todo__checkbox"),n.elements.todoTitle=n.elements.todo.querySelector(".todo__title"),n.elements.todoDate=n.elements.todo.querySelector(".todo__due-date"),n.elements.todoEditBtn=n.elements.todo.querySelector(".todo-edit-btn"),n.elements.todoDeleteBtn=n.elements.todo.querySelector(".todo-delete-btn"),n.elements.todoDescription=n.elements.todo.querySelector(".todo__description"),n.elements.todoParentBtn=n.elements.todo.querySelector(".todo__parent"),n.elements.todoParentBtnIcon=n.elements.todo.querySelector(".parent__icon"),n.elements.todoParentBtnLabel=n.elements.todo.querySelector(".parent__label"),n.update()}}class g{constructor(e,t){this.module=e,this.view=t}get events(){return this.module.events}get data(){return this.module.data}update(){this.events.publish("update")}completed(){const e=this,{isCompleted:t,isExpired:n}=e.data;n||(e.data.isCompleted=!t,e.update(),e.events.publish("completed"))}editTodo(){const e=this,{isExpired:t}=e.data;t||e.events.publish("editTodo",e.data)}deleteTodo(){const{id:e}=this.module.data;this.events.publish("deleteTodo",e)}goToParent(){const{id:e,projectId:t}=this.module.data;this.events.publish("goToParent",{id:e,projectId:t})}render({node:e,appendType:t="append"}){const n=this;n.events.publish("render",{node:e,appendType:t});const{todoCheckboxBtn:o,todoEditBtn:s,todoDeleteBtn:a,todoParentBtn:r}=n.view.elements;o.addEventListener("click",(()=>n.completed())),s.addEventListener("click",(()=>n.editTodo())),a.addEventListener("click",(()=>n.deleteTodo())),r.addEventListener("click",(()=>n.goToParent()))}}class _{constructor(e){const t=new y(e),n=new T(t),o=new g(t,n);this.controller=o}}class w{constructor(e){const t=this;t.module=e,t.elements={},t.components={},t.module.events.subscribe("render",(({node:e,appendType:n})=>t.render({node:e,appendType:n}))).subscribe("toggleSidebar",(e=>t.toggleSidebar(e))).subscribe("updateTabs",(()=>t.updateTabs())).subscribe("changeTab",(({prevId:e,currentId:n})=>t.changeTab(e,n))).subscribe("createTab",(e=>t.createTab(e))).subscribe("createTodo",(e=>t.createTodo(e))).subscribe("removeTodos",(()=>t.removeTodos())).subscribe("deleteTodo",(e=>t.deleteTodo(e))).subscribe("goToTodo",(e=>t.goToTodo(e))).subscribe("removeProject",(e=>t.removeProject(e)))}removeProject(e){const{tabs:t}=this.components,{tabListItems:n}=this.elements;n?.[e]&&(n[e].remove(),delete n[e],delete t[e])}toggleSidebar(e){const{app:t}=this.elements;t.classList[e?"remove":"add"]("sidebar-hide")}updateTabs(){const{tabs:e}=this.components;Object.keys(e).forEach((t=>e[t].update()))}changeTab(e,t){const{contentBody:n}=this.elements,{tabs:o}=this.components,s=o[e],a=o[t];s&&s.setActive(!1),a.setActive(!0),n.scrollIntoView()}createTab(e){const t=this,{tabList:n}=t.elements,{id:o,type:s}=e,a=document.createElement("li");t.components.tabs||(t.components.tabs={},t.elements.tabListItems={}),t.components.tabs[o]=new v(e).controller,t.components.tabs[o].render({node:a}),t.elements.tabListItems[o]=a,a.classList.add("list__item"),n[s].append(a)}goToTodo(e){const{todoListItems:t}=this.elements;t[e].scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),t[e].classList.add("highlight")}deleteTodo(e){const{todoListItems:t={}}=this.elements;t?.[e]&&(t[e].remove(),delete t[e])}removeTodos(){const e=this,{todos:t={}}=e.components;Object.keys(t).forEach((t=>e.deleteTodo(t))),e.components.todos={},e.elements.todoListItems={}}createTodo(e){const t=this,{todoList:n}=t.elements,{id:o}=e,s=document.createElement("li");t.components.todos||(t.components.todos={},t.elements.todoListItems={}),t.components.todos[o]=new _(e).controller,t.components.todos[o].render({node:s}),t.elements.todoListItems[o]=s,s.classList.add("list__item"),n.prepend(s)}render({node:e,appendType:t}){const n=this,{app:o}=n.elements;if(!(e instanceof HTMLElement))throw new Error("Can't rendering, bad node");o&&o instanceof HTMLElement?n.elements.app.innerHTML="":(n.elements.app=document.createElement("div"),n.elements.app.classList.add("app"),e[t](n.elements.app)),n.elements.app.innerHTML='\n      <aside class="app__sidebar">\n        <button class="btn sidebar__toggle" type="button" aria-label="Show Sidebar">\n          <span class="material-symbols-rounded btn-icon sidebar__toggle-icon">menu</span>\n        </button>\n\n        <div class="sidebar__content">\n          <header class="sidebar__header">\n            <span class="material-symbols-rounded material-symbols-rounded_fill header-icon">assignment</span>\n            <h1 class="header__title">todome</h1>\n          </header>\n\n          <div class="sidebar__body">\n            <ul class="tab__list tab__list-default">\n            </ul>\n\n            <div class="body-container">\n              <div class="body-container__header">\n                <h2 class="header__title">projects</h2>\n\n                <button class="btn tab__create-btn" type="button" aria-label="Create Project">\n                  <span class="material-symbols-rounded btn-icon">add</span>\n                </button>\n              </div>\n\n              <ul class="tab__list tab__list-user">\n              </ul>\n            </div>\n          </div>\n\n          <footer class="sidebar__footer">\n            <span class="footer__copyright">\n              Â© <a href="http://github.com/vyachnd" target="_blank" rel="noopener">vyachnd</a>, 2022\n            </span>\n          </footer>\n        </div>\n      </aside>\n\n      <main class="app__content">\n        <div class="content-wrapper">\n          <ul class="todo__list"></ul>\n        </div>\n      </main>\n    ',n.elements.sidebar=n.elements.app.querySelector(".app__sidebar"),n.elements.sidebarToggle=n.elements.app.querySelector(".sidebar__toggle"),n.elements.sidebarBody=n.elements.sidebar.querySelector(".sidebar__body"),n.elements.contentBody=n.elements.app.querySelector(".app__content .content-wrapper"),n.elements.tabList={default:n.elements.sidebarBody.querySelector(".tab__list-default"),user:n.elements.sidebarBody.querySelector(".tab__list-user")},n.elements.tabCreateBtn=n.elements.sidebarBody.querySelector(".tab__create-btn"),n.elements.todoList=n.elements.app.querySelector(".todo__list"),n.components.heading=(new u).controller,n.components.heading.render({node:n.elements.contentBody,appendType:"prepend"})}}const f=[{id:"inbox",title:"Inbox",iconType:"inbox",type:"default",options:{deleted:!1,edited:!1},isActive:!0},{id:"today",title:"Today",iconType:"today",filter:({dueDate:e})=>s.isToday(new Date(e)),type:"default",options:{deleted:!1,edited:!1,added:!1,parent:!0}},{id:"week",title:"Week",iconType:"date_range",filter:({dueDate:e})=>{const t=s.isToday(new Date(e)),n=s.isWeek(new Date(e));return!t&&n},type:"default",options:{deleted:!1,edited:!1,added:!1,parent:!0}},{id:"month",title:"Month",iconType:"calendar_month",filter:({dueDate:e})=>{const t=s.isToday(new Date(e)),n=s.isWeek(new Date(e)),o=s.isMonth(new Date(e));return!t&&!n&&o},type:"default",options:{deleted:!1,edited:!1,added:!1,parent:!0}},{id:"expired",title:"Expired",iconType:"calendar_month",filter:({isExpired:e})=>e,type:"default",options:{deleted:!1,edited:!1,added:!1,parent:!0}}],L=[{id:"fa5ffc45-4ed4-48cc-aaca-815fc90cf54c",title:"Home",type:"user"},{id:"ea8e6945-9cb9-455d-8ff8-3999cc6b8013",title:"Work",type:"user"},{id:"ecd64616-12a0-41ad-97de-801701e8e23e",title:"Shop",type:"user"}],D=[...L],E=864e5,M=["Luctus","Vel","Augue","Maecenas","Aptent","Sollicitudin","Amet","Amet","Integer","Sapien","Curabitur","Proin","Dapibus","Eros","Vestibulum","Tempus","Curae","Etiam","Curae","Etiam","Sit","Egestas","Vehicula","Lorem","Porttitor","Nostra","Ornare","Conubia","Rutrum","Erat","Potenti","Accumsan","Torquent","Sit","Vivamus","Pharetra","Placerat","Vel","Non","Suscipit","Fusce","Quisque","Fusce","Odio","Tempus","Integer","Fringilla","Massa","Quisque","Consectetur","Magna","A","Sapien","Fusce","Cursus","Dui","Odio","Malesuada","Taciti","Placerat","Felis","Tempor","Quis","Per","Egestas","Semper","Convallis","Molestie","Enim","Eros","Inceptos","Dictum","Venenatis","Hendrerit","Risus","Est","Porttitor","Nullam","Commodo","Feugiat","Etiam","Porta","Vulputate","Blandit","Molestie","Hendrerit","Feugiat","Eu","Sodales","Eleifend","Inceptos","Cubilia","Luctus","Nunc","Amet","Mattis","Lacinia","Quisque","Erat","Erat","Porta","Ultricies","Faucibus","Pretium","Enim","Tortor","Libero","Condimentum","Rutrum","Vulputate","Aliquam","Ullamcorper","Dictumst","Lobortis","Lobortis","Nullam","Aliquet","Nunc","Convallis","Massa","In","Vehicula","Nam","Volutpat","Sapien","Aenean","Nisi","Tempus","Sit","Integer","Diam","Pharetra","Mattis","Per","Fermentum","Fusce","Laoreet","Quisque","Eget","Id","Vel","Lectus","Nisl","Tempus","Tellus","In","Conubia","Inceptos","Erat","Senectus","Bibendum","Duis","Maecenas","Eu","Gravida","Porttitor","Nulla","Pellentesque","Malesuada","Lobortis","Sollicitudin","Sapien","Etiam","Tincidunt","Mi","Sodales","Bibendum","Taciti","Morbi","Lorem","Elementum","Vitae","Sociosqu","Suscipit","Consequat","Sem","Felis","Etiam","Adipiscing","Tempor","Tristique","Vivamus","Quisque","Libero","Sit","Consectetur","Potenti","Primis","Netus","Ultrices","Blandit","Ut","Nisi","Ornare","Id","Nostra","Sodales","Lacinia","Egestas","Rutrum","Libero","Proin","Sodales","Habitant","Cras","Tristique","Auctor","Eget","Ipsum","Tortor","Mauris","Faucibus","Auctor","Massa","Vulputate","Tincidunt","Placerat","In","Quisque","Aenean","Cubilia","Bibendum","Lobortis","Sagittis","Nibh","Auctor","Conubia","Enim","Platea","Tristique","Fusce","Arcu","Ante","Ultrices","Quisque","Nostra","Sociosqu","Erat","Enim","Molestie","Arcu","Nullam","Taciti","Massa","Tortor","Ultricies","Amet","Himenaeos","Accumsan","Senectus","Imperdiet","Donec","Auctor","Libero","Varius","Quisque","Cras","Senectus","Amet","Tempus","Class","Luctus","Sollicitudin","Amet","Aenean","Etiam","Curabitur","Condimentum","Fames","Vitae","Taciti","Dictumst","Convallis","Vehicula","Libero","Consequat","Interdum","Malesuada","Eu","Sit","Etiam","Integer","Ad","Senectus","Dui","A","Sit","Sed","Amet","Ante","Donec","Aenean","Luctus","Sed","Interdum","Commodo","Molestie","Vivamus","Per","Facilisis","Viverra","Lobortis","Curabitur","Nisl","Lectus","Leo","Nec","Elit","Suspendisse","Odio","Praesent","Ante","Aenean","Aliquet","Porttitor","Nulla","Conubia","Egestas","Euismod","Tempus","Lorem","Vivamus","Tortor","Torquent","Mauris","Ultrices","Auctor","Erat","Nisl","Libero","Varius","Augue","Mauris","Habitasse","Convallis","Non","Sapien","Curabitur","Lobortis","Etiam","Inceptos","In","Nec","Turpis","Aptent","Dictumst","Est","Vehicula","Nec","Lacinia","Rhoncus","Proin","Varius","Duis","Blandit","Vestibulum","Scelerisque","Egestas","Mi","Tellus","Quisque"];D.push({id:"inbox"});class S{constructor(t){const n=this;n.events=new e,n.title=t?.title||"Modal",n.open=t?.open||!1}}class j{constructor(e){const t=this;t.module=e,t.elements={},t.module.events.subscribe("render",(({node:e,appendType:n})=>t.render({node:e,appendType:n}))).subscribe("close",(()=>t.close())).subscribe("open",(()=>t.open())).subscribe("remove",(()=>t.remove()))}remove(){const{modal:e}=this.elements;e.remove(),document.body.classList.remove("no-scroll")}close(){const{modal:e}=this.elements;e.classList.add("modal_close")}open(){const{modal:e}=this.elements;e.classList.add("modal_open"),document.body.classList.add("no-scroll")}render({node:e,appendType:t}){const n=this,{modal:o}=n.elements,{title:s}=n.module;if(!(e instanceof HTMLElement))throw new Error("Can't rendering, bad node");o&&o instanceof HTMLElement?n.elements.modal.innerHTML="":(n.elements.modal=document.createElement("div"),n.elements.modal.classList.add("modal"),e[t](n.elements.modal)),n.elements.modal.innerHTML=`\n      <div class="modal-overlay"></div>\n\n      <div class="modal-container">\n        <div class="modal__header">\n          <h2 class="modal__title">${s}</h2>\n\n          <button class="btn btn_primary modal__close-btn" type="button" aria-label="Close">\n            <span class="material-symbols-rounded close-btn__icon">close</span>\n          </button>\n        </div>\n\n        <div class="modal__body"></div>\n      </div>\n    `,n.elements.overlay=n.elements.modal.querySelector(".modal-overlay"),n.elements.modalContainer=n.elements.modal.querySelector(".modal-container"),n.elements.modalTitle=n.elements.modalContainer.querySelector(".modal__title"),n.elements.closeBtn=n.elements.modalContainer.querySelector(".modal__close-btn"),n.elements.modalBody=n.elements.modalContainer.querySelector(".modal__body")}}class C{constructor(e,t){this.module=e,this.view=t}get events(){return this.module.events}get body(){return this.view.elements.modalBody}remove(){this.events.publish("remove")}close(){this.events.publish("close")}open(){this.events.publish("open")}render({node:e,appendType:t="append"}){const n=this;n.events.publish("render",{node:e,appendType:t});const{modal:o,overlay:s,closeBtn:a}=n.view.elements,{open:r}=n.module;s.addEventListener("click",(()=>n.close())),a.addEventListener("click",(()=>n.close())),window.addEventListener("animationend",(({animationName:e})=>{"modal_open-container"===e&&o.classList.remove("modal_open"),"modal_close-overlay"===e&&(o.classList.remove("modal_close"),n.remove())})),r&&n.open()}}class P{constructor(e={}){const t=new S(e),n=new j(t),o=new C(t,n);this.controller=o}}class k{constructor(t){const n=this;n.events=new e,n.type=t?.type||"message",n.message=t?.message||"No Body Content",n.values=t?.values||{},n.submit={type:t?.submit?.type||"normal",title:t?.submit?.title||"Confirm",callback:t?.submit?.callback||null},n.reset={type:t?.reset?.type||"normal",title:t?.reset?.title||"Cancel",callback:t?.reset?.callback||null}}}class I{constructor(){const t=this;t.events=new e,t.calendarMonth=(new Date).getMonth(),t.calendarYear=(new Date).getFullYear(),t.today=s.today,t.tomorrow=s.tomorrow,t.weekend=s.weekend}set value(e){const t=this,n=t.date;t.date=s.dropTime(e),e?(t.calendarMonth=e.getMonth(),t.calendarYear=e.getFullYear()):(t.calendarMonth=(new Date).getMonth(),t.calendarYear=(new Date).getFullYear()),t.events.publish("setValue",{prev:n,current:t.date})}get value(){return this.date?new Date(this.date):null}getValueText(){return s.dateToText(this.value)}getCalendarText(){return`${new Date(0,this.calendarMonth,1).toLocaleString("en",{month:"long"})}, ${this.calendarYear}`}resetMonth(){const e=this;e.calendarMonth=(e.value||new Date).getMonth(),e.calendarYear=(e.value||new Date).getFullYear()}changeCalendarMonth(e){const t=this;"prev"===e?t.calendarMonth-=1:"next"===e?t.calendarMonth+=1:t.resetMonth(),t.calendarMonth>11?(t.calendarMonth=0,t.calendarYear+=1):t.calendarMonth<0&&(t.calendarMonth=11,t.calendarYear-=1),t.events.publish("updateCalendar",t.calendarMonth)}getCalendarDays(e=this.calendarMonth,t=this.calendarYear){const n=this.value||new Date;return"number"==typeof e&&(n.setYear(t),n.setMonth(e)),s.calendarDays(n)}}class q{constructor(e){const t=this;t.module=e,t.elements={},t.module.events.subscribe("render",(({node:e,appendType:n,classList:o})=>t.render({node:e,appendType:n,classList:o}))).subscribe("renderCalendar",(e=>t.renderCalendar(e))).subscribe("setValue",(({prev:e,current:n})=>t.setValue({prev:e,current:n}))).subscribe("updateCalendar",(()=>t.updateCalendar()))}setValue({prev:e,current:t}){const n=this,{calendarDaysBtn:o}=n.elements;if(o){const s=o.filter((t=>t[1]===e))[0],a=o.filter((e=>e[1]===t))[0];s?.[0].classList.remove("date_active"),a?.[0].classList.add("date_active"),n.module.events.publish("valueSetted")}n.update()}updateCalendar(){const e=this,{value:t,calendarMonth:n}=e.module,{calendarTitle:o,calendarDaysBtn:s}=e.elements,a=e.module.getCalendarDays(n);o.textContent=e.module.getCalendarText();for(let e=0;e<s.length;e+=1){const[o,,]=s[e],r=a[e];r.getMonth()!==n?(o.classList.remove("date_active"),o.classList.add("date_disabled")):(o.classList.remove("date_disabled","date_active"),t&&t.getTime()===r.getTime()&&o.classList.add("date_active")),o.textContent=r.getDate(),s[e][1]=r}}renderCalendarDays(){const e=this,{value:t}=e.module,{calendarDays:n}=e.elements,o=e.module.getCalendarDays(),s=t?.getMonth()||(new Date).getMonth(),a=document.createElement("tbody");a.classList.add("days__body");const r=()=>{const e=document.createElement("tr");return e.classList.add("calendar__days-row"),e},d=(e,t)=>{const n=document.createElement("td");return n.classList.add(...e),n.textContent=t,n};let i=r();e.elements.calendarDaysBtn=[];for(let n=0;n<o.length;n+=1){const l=o[n],c=!((n+1)%7);let m=null;l.getMonth()!==s?m=d(["date","date_disabled"],l.getDate()):(m=d(["date"],l.getDate()),t?.getTime()===l.getTime()&&m.classList.add("date_active")),i.append(m),e.elements.calendarDaysBtn.push([m,l]),c&&(a.append(i),i=r())}n.append(a)}renderCalendar(e){const t=this,{today:n,tomorrow:o,weekend:a}=t.module,{calendar:r}=t.elements;r&&(r.remove(),delete t.elements.calendar),t.elements.calendar=document.createElement("div"),t.elements.calendar.classList.add("date-picker__calendar"),t.elements.calendar.innerHTML=`\n      <div class="calendar-container">\n        <button id="today-btn" class="btn calendar__btn" type="button" aria-label="Date Today">\n          <span class="material-symbols-rounded btn-icon">today</span>\n          Today\n          <span class="btn__week-day">${s.getWeekShortName(n)}</span>\n        </button>\n\n        <button id="tomorrow-btn" class="btn calendar__btn" type="button" aria-label="Date Tomorrow">\n          <span class="material-symbols-rounded btn-icon">sunny</span>\n          Tomorrow\n          <span class="btn__week-day">${s.getWeekShortName(o)}</span>\n        </button>\n\n        <button id="weekend-btn" class="btn calendar__btn" type="button" aria-label="Date Weekend">\n          <span class="material-symbols-rounded btn-icon">weekend</span>\n          Weekend\n          <span class="btn__week-day">${s.dateToShortText(a)}</span>\n        </button>\n\n        <button id="no-date-btn" class="btn calendar__btn" type="button" aria-label="Date None">\n          <span class="material-symbols-rounded btn-icon">schedule</span>\n          No date\n        </button>\n      </div>\n\n      <div class="calendar-container">\n        <div class="calendar__header">\n          <h3 class="calendar__title">${t.module.getCalendarText()}</h3>\n\n          <div class="calender__pagination">\n            <button id="prev-month-btn" class="btn" type="button" aria-label="Previous Month">\n              <span class="material-symbols-rounded btn-icon">navigate_before</span>\n            </button>\n\n            <button id="cur-month-btn" class="btn" type="button" aria-label="Current Month">\n              <span class="material-symbols-rounded btn-icon">circle</span>\n            </button>\n\n            <button id="next-month-btn" class="btn" type="button" aria-label="Next Month">\n              <span class="material-symbols-rounded btn-icon">navigate_next</span>\n            </button>\n          </div>\n        </div>\n\n        <table class="calendar__days">\n          <thead class="days__header">\n            <tr class="calendar__days-row">\n              <td>Mo</td>\n              <td>Tu</td>\n              <td>We</td>\n              <td>Th</td>\n              <td>Fr</td>\n              <td>Sa</td>\n              <td>Su</td>\n            </tr>\n          </thead>\n        </tabel>\n      </div>\n    `,t.elements.calendarTitle=t.elements.calendar.querySelector(".calendar__title"),t.elements.todayBtn=t.elements.calendar.querySelector("#today-btn"),t.elements.tomorrowBtn=t.elements.calendar.querySelector("#tomorrow-btn"),t.elements.weekendBtn=t.elements.calendar.querySelector("#weekend-btn"),t.elements.noDateBtn=t.elements.calendar.querySelector("#no-date-btn"),t.elements.prevMonthBtn=t.elements.calendar.querySelector("#prev-month-btn"),t.elements.curMonthBtn=t.elements.calendar.querySelector("#cur-month-btn"),t.elements.nextMonthBtn=t.elements.calendar.querySelector("#next-month-btn"),t.elements.calendarDays=t.elements.calendar.querySelector(".calendar__days"),t.renderCalendarDays(),e.body.append(t.elements.calendar),e.show("top")}update(){const e=this,{value:t}=e.module,{datePicker:n,value:o}=e.elements;t?(n.classList.remove("date-picker_empty"),o.textContent=e.module.getValueText()):(n.classList.add("date-picker_empty"),o.textContent="Select date")}render({node:e,appendType:t,classList:n}){const o=this,{datePicker:s}=o.elements;if(!(e instanceof HTMLElement))throw new Error("Can't rendering, bad node");s&&s instanceof HTMLElement?o.elements.datePicker.innerHTML="":(o.elements.datePicker=document.createElement("div"),o.elements.datePicker.classList.add(...n,"date-picker"),e[t](o.elements.datePicker)),o.elements.datePicker.innerHTML='\n      <span class="date-picker__value"></span>\n      <span class="material-symbols-rounded date-picker__icon">schedule</span>\n    ',o.elements.value=o.elements.datePicker.querySelector(".date-picker__value"),o.update()}}class B{constructor({parent:t}){const n=this;n.events=new e,n.parent=t,n.left=0,n.top=0}show(e){this.position=e,this.events.publish("show",e)}getPosition({type:e,body:t}){const n=this,o=n.parent.getBoundingClientRect(),s=t.getBoundingClientRect();return"top"!==e&&"bottom"!==e||(n.left=o.left+o.width/2-s.width/2),"top"===e?n.top=o.top-s.height-5:"bottom"===e&&(n.top=o.top+o.height+5),{top:n.top,left:n.left}}}class x{constructor(e){const t=this;t.module=e,t.elements={},t.module.events.subscribe("render",(({node:e,appendType:n})=>t.render({node:e,appendType:n}))).subscribe("show",(e=>t.show(e))).subscribe("close",(()=>t.close()))}show(e){const{popover:t}=this.elements,{top:n,left:o}=this.module.getPosition({type:e,body:t});t.style.top=`${n}px`,t.style.left=`${o}px`,t.classList.add("popover_show")}close(){const{popover:e}=this.elements;e.classList.add("popover_close");const t=setTimeout((()=>{e.remove(),clearTimeout(t)}),300)}render({node:e,appendType:t}){const n=this,{popover:o}=n.elements;if(!(e instanceof HTMLElement))throw new Error("Can't rendering, bad node");o&&o instanceof HTMLElement?n.elements.popover.innerHTML="":(n.elements.popover=document.createElement("div"),n.elements.popover.tabIndex=0,n.elements.popover.classList.add("popover"),e[t](n.elements.popover))}}class A{constructor(e,t){this.module=e,this.view=t}get events(){return this.module.events}get body(){return this.view.elements.popover}outsideClick({target:e}){const t=this,{popover:n}=t.view.elements;e.closest(`.${n.classList[0]}`)||(document.removeEventListener("mouseup",t.bindedOutsideClick),t.close())}show(e="bottom"){const t=this;t.bindedOutsideClick=t.outsideClick.bind(this),document.addEventListener("mouseup",t.bindedOutsideClick),t.module.show(e)}close(){this.events.publish("close")}render({node:e,appendType:t="append"}){this.events.publish("render",{node:e,appendType:t})}}class H{constructor({parent:e}){const t=new B({parent:e}),n=new x(t),o=new A(t,n);this.controller=o}}class V{constructor(e,t){this.module=e,this.view=t}get events(){return this.module.events}get value(){return this.module.value}setValue(e){this.module.value=e}changeCalendarMonth(e){this.module.changeCalendarMonth(e)}renderCalendar(){const e=this,{datePicker:t}=e.view.elements,n=new H({parent:t}).controller;n.render({node:document.body}),e.events.publish("renderCalendar",n);const{today:o,tomorrow:s,weekend:a}=e.module,{todayBtn:r,tomorrowBtn:d,weekendBtn:i,noDateBtn:l,calendarDaysBtn:c,prevMonthBtn:m,curMonthBtn:u,nextMonthBtn:p}=e.view.elements;r.addEventListener("click",(()=>e.setValue(o))),d.addEventListener("click",(()=>e.setValue(s))),i.addEventListener("click",(()=>e.setValue(a))),l.addEventListener("click",(()=>e.setValue(null))),c.forEach((([t,,],n)=>{t.addEventListener("click",(()=>{t.classList.contains("date_disabled")||t.classList.contains("date_acitve")||e.setValue(c[n][1])}))})),m.addEventListener("click",(()=>e.changeCalendarMonth("prev"))),u.addEventListener("click",(()=>e.changeCalendarMonth())),p.addEventListener("click",(()=>e.changeCalendarMonth("next"))),e.events.subscribe("valueSetted",(()=>n.close())),n.events.subscribe("close",(()=>e.module.resetMonth()))}render({node:e,appendType:t="append",classList:n=[]}){const o=this;o.events.publish("render",{node:e,appendType:t,classList:n});const{datePicker:s}=o.view.elements;s.addEventListener("click",(()=>o.renderCalendar()))}}class ${constructor(){const e=new I,t=new q(e),n=new V(e,t);this.controller=n}}class N{constructor({items:t,selectedId:n}){const o=this;o.events=new e,o.items=t,o.selectedId=n,o.value=t?.[n]||null}set value(e){const t=this,n=t.item;t.item=e,t.events.publish("setValue",{prev:n,current:t.item})}get value(){return this.item||null}setValue(e){const t=this;t.items[e]?(t.value=t.items[e],t.selectedId=e):t.value=null,t.events.publish("setValue")}}class F{constructor(e){const t=this;t.module=e,t.elements={},t.module.events.subscribe("render",(({node:e,appendType:n,classList:o})=>t.render({node:e,appendType:n,classList:o}))).subscribe("renderList",(e=>t.renderList(e))).subscribe("setValue",(()=>t.update()))}static renderItem(e){return`\n      <span class="material-symbols-rounded item__icon">${e.iconType}</span>\n      <span class="item__label">${e.title}</span>\n    `}update(){const{value:e}=this.module,{dropdown:t,value:n}=this.elements;e?(t.classList.remove("dropdown_empty"),n.innerHTML=F.renderItem(e)):(t.classList.add("dropdown_empty"),n.textContent="Select project")}renderList(e){const t=this,{dropdown:n}=t.elements,{items:o,selectedId:s}=t.module;t.elements.list=document.createElement("ul"),t.elements.list.classList.add("dropdown__list"),t.elements.list.style.width=`${n.getBoundingClientRect().width}px`,t.elements.list.innerHTML=`${o.map(((e,t)=>`\n      <li class="list__item${t===s?" list__item_selected":""}">\n        ${F.renderItem(e)}\n      </li>\n    `)).join("")}`,t.elements.listItems=t.elements.list.querySelectorAll(".list__item"),e.body.append(t.elements.list),e.show("bottom")}render({node:e,appendType:t,classList:n}){const o=this,{dropdown:s}=o.elements;if(!(e instanceof HTMLElement))throw new Error("Can't rendering, bad node");s&&s instanceof HTMLElement?o.elements.dropdown.innerHTML="":(o.elements.dropdown=document.createElement("div"),o.elements.dropdown.classList.add(...n,"dropdown"),e[t](o.elements.dropdown)),o.elements.dropdown.innerHTML='\n      <div class="dropdown__value"></div>\n      <span class="material-symbols-rounded dropdown__icon">expand_more</span>\n    ',o.elements.value=o.elements.dropdown.querySelector(".dropdown__value"),o.update()}}class O{constructor(e,t){this.module=e,this.view=t}get events(){return this.module.events}get value(){return this.module.value}setValue(e){this.module.setValue(e)}renderList(){const e=this,{dropdown:t}=e.view.elements,n=new H({parent:t}).controller;n.render({node:document.body}),e.events.publish("renderList",n);const{selectedId:o}=e.module,{listItems:s}=e.view.elements;s.forEach(((t,n)=>{t.addEventListener("click",(()=>{n!==o&&e.setValue(n)}))})),e.events.subscribe("setValue",(()=>n.close()))}render({node:e,appendType:t="append",classList:n=[]}){const o=this;o.events.publish("render",{node:e,appendType:t,classList:n});const{dropdown:s}=o.view.elements;s.addEventListener("click",(()=>o.renderList()))}}class R{constructor({items:e=[],selectedId:t=null}){const n=new N({items:e,selectedId:t}),o=new F(n),s=new O(n,o);this.controller=s}}class U{constructor(e){const t=this;t.module=e,t.elements={},t.module.events.subscribe("render",(({node:e,appendType:n})=>t.render({node:e,appendType:n})))}renderCreateTodo(){const e=this,{formBody:t}=e.elements,{values:n}=e.module;t.innerHTML='\n      <div class="form-block">\n        <label class="form__label" for="todo-title">Title</label>\n        <input\n          id="todo-title"\n          class="form__input"\n          type="text"\n          minlength="3"\n          maxlength="16"\n          name="todo-title"\n          placeholder="Todo Title"\n          required\n        >\n      </div>\n\n      <div class="form-block">\n        <label class="form__label" for="todo-description">Description</label>\n        <textarea\n          id="todo-description"\n          class="form__input"\n          maxlength="60"\n          name="todo-description"\n          placeholder="Todo Description"\n          required\n        ></textarea>\n      </div>\n\n      <div class="form-block">\n        <label class="form__label" for="todo-description">Due Date</label>\n      </div>\n\n      <div class="form-block form-block_inline">\n        <label class="form__label">Priority</label>\n\n        <div class="form-block form-block_inline form-block_radio">\n          <input id="todo-priority-no" class="form__input-radio" type="radio" name="todo-priority" value="0" checked>\n          <label for="todo-priority-no" class="btn"><span class="material-symbols-rounded">done</span></label>\n\n          <input id="todo-priority-remember" class="form__input-radio" type="radio" name="todo-priority" value="1">\n          <label for="todo-priority-remember" class="btn btn_remember"><span class="material-symbols-rounded">done</span></label>\n\n          <input id="todo-priority-important" class="form__input-radio" type="radio" name="todo-priority" value="2">\n          <label for="todo-priority-important" class="btn btn_important"><span class="material-symbols-rounded">done</span></label>\n\n          <input id="todo-priority-critical" class="form__input-radio" type="radio" name="todo-priority" value="3">\n          <label for="todo-priority-critical" class="btn btn_critical"><span class="material-symbols-rounded">done</span></label>\n        </div>\n      </div>\n\n      <div class="form-block">\n        <label class="form__label">Project</label>\n      </div>\n    ';const o=(new $).controller;o.render({node:t.querySelectorAll(".form-block")[2],classList:["form__input"]});const s=[...r.getProjectsByOptions({added:!0}),...r.getUserProjects()],a=s.filter((({id:e})=>e===r.activeProjectId))[0];let d=s.indexOf(a);d<0&&(d=null);const i=new R({items:s,selectedId:d}).controller;if(i.render({node:t.querySelectorAll(".form-block")[5],classList:["form__input"]}),e.elements.inputs={title:t.querySelector("#todo-title"),description:t.querySelector("#todo-description"),priority:t.querySelectorAll("[name=todo-priority]"),dueDate:o,project:i},e.elements.inputs.title.value=n?.title||null,e.elements.inputs.description.value=n?.description||null,n.priority){const t=n.priority;e.elements.inputs.priority[t].checked=!0}if(n.dueDate&&e.elements.inputs.dueDate.setValue(new Date(n.dueDate)),n.project){const t=s.indexOf(n.project);e.elements.inputs.project.setValue(t)}}renderCreateProject(){const e=this,{formBody:t}=e.elements,{values:n}=e.module;t.innerHTML='\n      <div class="form-block">\n        <label for="project-title" class="form__label">Title</label>\n        <input\n          id="project-title"\n          class="form__input"\n          type="text"\n          minlength="3"\n          maxlength="16"\n          name="project-title"\n          placeholder="Project Title"\n          required\n        >\n      </div>\n    ',e.elements.inputs={projectTitle:t.querySelector('input[name="project-title"]')},e.elements.inputs.projectTitle.value=n?.projectTitle||null,e.elements.inputs.projectTitle.focus()}renderMessage(){const{formBody:e}=this.elements,{message:t}=this.module;e.innerHTML=`<p class="form__message">${t}</p>`}render({node:e,appendType:t}){const n=this,{form:o}=n.elements,{type:s,reset:a,submit:r}=n.module;if(!(e instanceof HTMLElement))throw new Error("Can't rendering, bad node");o&&o instanceof HTMLElement?n.elements.form.innerHTML="":(n.elements.form=document.createElement("form"),n.elements.form.classList.add("form"),e[t](n.elements.form)),n.elements.form.innerHTML=`\n      <div class="form__body"></div>\n\n      <footer class="form__footer">\n        <button class="btn btn_primary" type="reset" aria-label="${a.title}">${a.title}</button>\n        <button class="btn" type="submit" aria-label="${r.title}">${r.title}</button>\n      </footer>\n    `,n.elements.formBody=n.elements.form.querySelector(".form__body"),n.elements.formResetBtn=n.elements.form.querySelector('button[type="reset"]'),n.elements.formSubmitBtn=n.elements.form.querySelector('button[type="submit"]'),"critical"===a.type&&n.elements.formResetBtn.classList.add("btn_critical"),"critical"===r.type&&n.elements.formSubmitBtn.classList.add("btn_critical"),"message"===s?n.renderMessage():"create-project"===s?n.renderCreateProject():"create-todo"===s&&n.renderCreateTodo()}}class Y{constructor(e,t){this.module=e,this.view=t}get events(){return this.module.events}get values(){const{form:e,inputs:t}=this.view.elements,{type:n}=this.module,o=new FormData(e);return"message"===n||("create-project"===n?{title:o.get("project-title")}:"create-todo"===n?{title:o.get("todo-title"),description:o.get("todo-description"),priority:+o.get("todo-priority"),dueDate:t.dueDate.value?.getTime()||null,projectId:t.project.value?.id||null}:null)}formReset(){const{reset:{callback:e}}=this.module;"function"==typeof e&&e(),this.events.publish("reset")}formSubmit(){const e=this,{submit:{callback:t}}=e.module;"function"==typeof t&&t(e.values),e.events.publish("submit",e.values)}render({node:e,appendType:t="append"}){const n=this;n.events.publish("render",{node:e,appendType:t});const{form:o,formResetBtn:s,formSubmitBtn:a}=n.view.elements;o.addEventListener("submit",(e=>e.preventDefault())),s.addEventListener("click",(()=>n.formReset())),a.addEventListener("click",(()=>n.formSubmit()))}}class W{constructor(e){const t=new k(e),n=new U(t),o=new Y(t,n);this.controller=o}}class Q{constructor(e,t){this.module=e,this.view=t}get events(){return this.module.events}get data(){return this.module.data}toggleSidebar(e){this.module.toggleSidebar(e)}goToTodo(e,t){const n=this;n.data.activeProjectId!==e&&n.changeTab(e),n.events.publish("goToTodo",t)}deletTodo(e){this.module.deleteTodo(e),this.updateTabs(),d.save("todos",r.getTodos())}editTodo(e,t){const n=this;n.module.editTodo(e,t),n.updateTabs(),n.createTodos(r.activeProjectId),d.save("todos",r.getTodos())}createTodo(e,t){const n=this,{activeProjectId:o}=n.data;if(o===t){n.events.publish("createTodo",e);const{todos:t}=n.view.components;t[e.id].events.subscribe("editTodo",(e=>n.formEditTodo(e))).subscribe("deleteTodo",(e=>n.formRemoveTodo(e))).subscribe("goToParent",(({projectId:e,id:t})=>n.goToTodo(e,t))).subscribe("completed",(()=>d.save("todos",r.getTodos())))}}createTodos(e){const t=this,n=r.getProject(e),o=r.getTodos(n.filter);t.events.publish("removeTodos"),o.forEach((n=>t.createTodo(n,e)))}loadTodo(e){const t=new a(e);return this.module.loadTodo(t),t}updateTabs(){this.module.updateTabs()}changeTab(e){const t=this,{heading:n}=t.view.components;n.setData(r.getProject(e)),t.module.changeTab(e),t.createTodos(e)}createTab(e){const n=this,o=new t(e);n.module.createTab(o);const{tabs:s}=n.view.components;return s[o.id].events.subscribe("tabClick",(()=>n.changeTab(o.id))),e.isActive&&(n.data.activeProjectId=o.id,n.changeTab(o.id)),o}editProject(e,t){const n=this.data.getProject(e);n&&n.setData(t),this.updateTabs(),d.save("projects",r.getUserProjects())}removeProject(e){const t=this;t.module.removeProject(e),t.updateTabs(),"inbox"!==e&&t.changeTab("inbox")}modalForm({modalOpt:e,formOpt:t}){const{app:n}=this.view.elements,o=new P(e).controller,s=new W(t).controller;o.render({node:n}),s.render({node:o.body}),s.events.subscribe("reset",(()=>o.close())).subscribe("submit",(()=>o.close()))}formCreateProject(){const e=this,t={modalOpt:{title:"Create Project",open:!0},formOpt:{type:"create-project",submit:{title:"Create",callback:({title:t})=>{const n=e.createTab({title:t});e.changeTab(n.id),d.save("projects",r.getUserProjects())}}}};e.modalForm(t)}formEditProject(e,t=null){const n=this,{title:o}=n.data.getProject(e),s={modalOpt:{title:"Edit Project",open:!0},formOpt:{type:"create-project",values:{projectTitle:o},submit:{title:"Edit",callback:({title:o})=>{n.editProject(e,{title:o}),t?.update()}}}};n.modalForm(s)}formRemoveProject(e,t=null){const n=this,{title:o}=n.data.getProject(e),s={modalOpt:{title:"Remove Project",open:!0},formOpt:{type:"message",message:`Are you sure you want to delete the project\n<strong class="message_bold">${o}</strong>`,submit:{type:"critical",title:"Remove",callback:()=>{n.removeProject(e),t?.update()}}}};n.modalForm(s)}formCreateTodo(e){const t=this,n=t.data.getProject(e),{options:{added:o}}=n;if(o){const e={modalOpt:{title:"Create Todo",open:!0},formOpt:{type:"create-todo",submit:{title:"Create",callback:e=>{const n=t.loadTodo(e);t.updateTabs(),t.createTodo(n,e.projectId),d.save("todos",r.getTodos())}}}};t.modalForm(e)}}formEditTodo(e){const t=this,n={modalOpt:{title:"Edit Todo",open:!0},formOpt:{type:"create-todo",values:{title:e.title,description:e.description,priority:e.priority,dueDate:e.dueDate,project:r.getProject(e.projectId)},submit:{title:"Edit",callback:n=>t.editTodo(e.id,n)}}};t.modalForm(n)}formRemoveTodo(e){const t=this,{title:n}=t.data.getTodo(e),o={modalOpt:{title:"Remove Todo",open:!0},formOpt:{type:"message",message:`Are you sure you want to delete the todo\n<strong class="message_bold">${n}</strong>`,submit:{type:"critical",title:"Remove",callback:()=>t.deletTodo(e)}}};t.modalForm(o)}render({node:e,appendType:t="append"}){const n=this;n.module.events.publish("render",{node:e,appendType:t});const{sidebarToggle:o,tabCreateBtn:s}=n.view.elements,{heading:a}=n.view.components,{data:i}=n.module;i.app=this,n.toggleSidebar(i.isSidebarShown),f.forEach((e=>{n.createTab(e)})),d.load("projects").then((e=>{(0===e.length?L:e).forEach((e=>n.createTab(e))),0===e.length&&d.save("projects",r.getUserProjects())})),d.load("todos").then((e=>{(0===e.length?(()=>{const e=[];for(let t=0;t<100;t+=1)e.push({id:crypto.randomUUID(),title:M[Math.floor(Math.random()*M.length)],description:new Array(Math.floor(61*Math.random())).fill(0).map((()=>M[Math.floor(Math.random()*M.length)])).join(" ").slice(0,60),dueDate:Math.random()>.7?(new Date).getTime():(new Date).getTime()+Math.floor(Math.random()*(100*E)-14*E),priority:Math.max(0,Math.floor(5*Math.random())-1),projectId:D[Math.floor(Math.random()*D.length)].id,isCompleted:Math.random()>.7});return e})():e).forEach((e=>n.loadTodo(e))),n.updateTabs(),n.createTodos(r.activeProjectId),0===e.length&&d.save("todos",r.getTodos())})),o.addEventListener("click",(()=>n.toggleSidebar(!i.isSidebarShown))),s.addEventListener("click",(()=>n.formCreateProject())),window.addEventListener("animationend",(({animationName:e,target:t})=>{t.classList.remove(e)})),a.events.subscribe("createTodo",(e=>n.formCreateTodo(e))),a.events.subscribe("editProject",(e=>n.formEditProject(e,a))),a.events.subscribe("removeProject",(e=>n.formRemoveProject(e,a)))}}class J{constructor(){const e=new i,t=new w(e),n=new Q(e,t);this.controller=n}}(new J).controller.render({node:document.body,appendType:"prepend"})}},e=>{var t;t=543,e(e.s=t)}]);